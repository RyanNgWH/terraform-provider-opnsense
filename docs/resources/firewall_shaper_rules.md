---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "opnsense_firewall_shaper_rules Resource - opnsense"
subcategory: ""
description: |-
  Traffic shaping rules are used to apply the shaping to a certain package flow. The shaping rules are handled independently from the firewall rules and other settings.
---

# opnsense_firewall_shaper_rules (Resource)

Traffic shaping rules are used to apply the shaping to a certain package flow. The shaping rules are handled independently from the firewall rules and other settings.

## Example Usage

```terraform
# Example traffic shaper rule
resource "opnsense_firewall_shaper_rules" "example_shaper_rule" {
  enabled           = true
  sequence          = 10
  interface         = "wan"
  interface2        = "lan"
  protocol          = "igmp"
  max_packet_length = 255
  sources = [
    "1.1.1.1",
    "2.2.2.2"
  ]
  source_not  = false
  source_port = "ssh"
  destinations = [
    "any",
  ]
  destination_not  = false
  destination_port = "http"
  dscp = [
    "af11",
    "best effort"
  ]
  direction   = "in"
  target      = "de21d36c-bd97-4477-9c2d-c4a8f23818d0"
  description = "Example traffic shaper rule"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `interface` (String) The interface this rule applies to.
- `target` (String) Target pipe or queue.

### Optional

- `description` (String) Description to identify this rule.
- `destination_not` (Boolean) Whether the destination matching should be inverted. Defaults to `false`.
- `destination_port` (String) Destination port number or well known name (`imap`, `imaps`, `http`, `https`, ...), for ranges use a dash. Defaults to `any`
- `destinations` (List of String) Destination ips or networks, examples `10.0.0.0/24`, `10.0.0.1`. Defaults to be `any`. Ensure that the destinations are in lexicographical order, else the provider will detect a change on every execution.
- `direction` (String) Direction of packet matching. Must be one of: `both`, `in`, `out`. Defaults to `both`.
- `dscp` (List of String) Match against one or multiple DSCP values. Allowed values: `af11`, `af12`, `af13`, `af21`, `af22`, `af23`, `af31`, `af32`, `af33`, `af41`, `af42`, `best effort`, `cs1`, `cs2`, `cs3`, `cs4`, `cs5`, `cs6`, `cs7`, `expedited forwarding`. Ensure that the dscp values are in lexicographical order, else the provider will detect a change on every execution.
- `enabled` (Boolean) Whether the traffic shaper rule is enabled. Defaults to `true`.
- `interface2` (String) The secondary interface, matches packets traveling to/from interface (1) to/from interface (2). Can be combined with direction.
- `max_packet_length` (Number) Specifies the maximum size of packets to match in bytes.
- `protocol` (String) The applicable protocol for this rule. Must be one of: `ip`, `ipv4`, `ipv6`, `udp`, `tcp`, `tcp_ack`, `tcp_ack_not`, `icmp`, `ipv6-icmp`, `igmp`, `esp`, `ah`, `gre`. Defaults to `ip`.
- `sequence` (Number) Order in which the rule will be evaluated (lowest first). Defaults to `1`.
- `source_not` (Boolean) Whether the source matching should be inverted. Defaults to `false`.
- `source_port` (String) Source port number or well known name (`imap`, `imaps`, `http`, `https`, ...), for ranges use a dash. Defaults to `any`
- `sources` (List of String) Source IPs or networks, examples `10.0.0.0/24`, `10.0.0.1`. Defaults to be `any`. Ensure that the sources are in lexicographical order, else the provider will detect a change on every execution.

### Read-Only

- `id` (String) Identifier of the traffic shaper rule.
- `last_updated` (String) DateTime when traffic shaper rule was last updated.

## Import

Import is supported using the following syntax:

```shell
# Traffic shaper rules can be imported by specifying the rule UUID. This can be found by examining the API calls on the OPNsense web interface
terraform import opnsense_firewall_shaper_rules.import_example 7ce41c23-968c-46f2-9b6b-3c9a1519086f
```
