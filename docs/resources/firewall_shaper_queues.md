---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "opnsense_firewall_shaper_queues Resource - opnsense"
subcategory: ""
description: |-
  A queue is an abstraction used to implement the WF2Q+ (Worstcase Fair Weighted Fair Queueing) policy, which is an efficient variant of the WFQ policy. The queue associates a weight and a reference pipe to each flow, and then all backlogged (i.e., with packets queued) flows linked to the same pipe share the pipe’s bandwidth proportionally to their weights. Note that weights are not priorities; a flow with a lower weight is still guaranteed to get its fraction of the bandwidth even if a flow with a higher weight is permanently backlogged.
---

# opnsense_firewall_shaper_queues (Resource)

A queue is an abstraction used to implement the WF2Q+ (Worstcase Fair Weighted Fair Queueing) policy, which is an efficient variant of the WFQ policy. The queue associates a weight and a reference pipe to each flow, and then all backlogged (i.e., with packets queued) flows linked to the same pipe share the pipe’s bandwidth proportionally to their weights. Note that weights are not priorities; a flow with a lower weight is still guaranteed to get its fraction of the bandwidth even if a flow with a higher weight is permanently backlogged.

## Example Usage

```terraform
# Example traffic shaper queue
resource "opnsense_firewall_shaper_queues" "example_shaper_queue" {
  enabled = true
  pipe    = "de21d36c-bd97-4477-9c2d-c4a8f23818d0"
  weight  = 10
  mask    = "src-ip"
  buckets = 10
  codel = {
    enabled  = true
    target   = 10
    interval = 10
    ecn      = true
  }
  pie         = false
  description = "Example traffic shaper queue"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `description` (String) Description to identify this queue.
- `pipe` (String) Connected pipe for this queue.

### Optional

- `buckets` (Number) Specifies the size of the hash table used for storing the various dynamic pipes configured with the mask setting.
- `codel` (Attributes) CoDel active queue management. (see [below for nested schema](#nestedatt--codel))
- `enabled` (Boolean) Whether the traffic shaper queue is enabled. Defaults to `true`.
- `mask` (String) Dynamic queue creation by source or destination address. Leave this value empty if you want to specify multiple queues with different weights. Must be one of: `none`, `src-ip`, `dst-ip`. Defaults to `none`
- `pie` (Boolean) Whether PIE active queue management should be enabled. Defaults to `false`
- `weight` (Number) Weight of this queue (`1..100`), used to prioritize within a pipe. (1 is low, 100 is high). Defaults to `100`

### Read-Only

- `id` (String) Identifier of the traffic shaper queue.
- `last_updated` (String) DateTime when traffic shaper queue was last updated.

<a id="nestedatt--codel"></a>
### Nested Schema for `codel`

Optional:

- `ecn` (Boolean) Whether explicit congestion notification is enabled. Defaults to 'false`
- `enabled` (Boolean) Whether CoDel active queue management is enabled.
- `interval` (Number) Interval before dropping packets (in ms), leave empty for default.
- `target` (Number) Minimum acceptable persistent queue delay (in ms), leave empty for default.

## Import

Import is supported using the following syntax:

```shell
# Traffic shaper queues can be imported by specifying the queue UUID. This can be found by examining the API calls on the OPNsense web interface
terraform import opnsense_firewall_shaper_queues.import_example 7ce41c23-968c-46f2-9b6b-3c9a1519086f
```
