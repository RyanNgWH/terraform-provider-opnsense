---
page_title: "OPNsense Provider"
description: |-
  The OPNsense provider is used to provision resources on an OPNsense instance.
---

# OPNsense Provider

This provider is used for provisioning and interacting with resources on an [OPNsense](https://opnsense.org/) instance. It aims to support only functionality officially supported by the OPNsense API.

The provider needs to be configured with the proper endpoints and credentials before it can be utilised.

## API Key

The provider uses the OPNsense API to perform operations on the OPNsense instance. An API key is required. Perform the following steps on your OPNsense instance:

1. (Optional) Create a new user for the provider
1. (Optional) Create a new group with the required privileges for the provider and assign your user to the group
1. Create an API key for the user with the required privileges (`System > Access > Users > [your-user] > API keys`)

### Privileges

The provider requires the following permissions on your OPNsense server.

- `Firewall: Alias: Edit`
- `Firewall: Categories`
- `Status: Interfaces`

> The provider could potentially work with stricter privileges. However, it is not guaranteed to do so and has only been tested with the above mentioned list.

## Example Usage

```terraform
provider "opnsense" {
  # May also be provided via the OPNSENSE_ENDPOINT environment variable
  endpoint = "https://172.28.28.129"
  # May also be provided via the OPNSENSE_API_KEY environment variable
  api_key = "opnsense-api-key"
  # May also be provided via the OPNSENSE_API_SECRET environment variable
  api_secret = "opnsense-api-secret"

  # Set to true if self-signed certificate is in use
  insecure = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `api_key` (String) The API key for the OPNsense API. May also be provided via the `OPNSENSE_API_KEY` environment variable.
- `api_secret` (String, Sensitive) The API secret for the OPNsense API. May also be provided via the `OPNSENSE_API_SECRET` environment variable.
- `endpoint` (String) The endpoint for the OPNsense API. This is typically `https://<your-opnsense-instance>`. Do not include the `/api` suffix. May also be provided via the `OPNSENSE_ENDPOINT` environment variable.
- `insecure` (Boolean) Whether TLS verification of the OPNsense API should be skipped. Defaults to `false`. May also be provided via the `OPNSENSE_API_INSECURE` environment variable.
- `timeout` (Number) The duration before the request to the OPNsense API times out (in seconds). Defaults to `120`.
